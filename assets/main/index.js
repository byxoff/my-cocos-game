System.register("chunks:///_virtual/main",["./SpineController.ts.ts","./SocketManager.ts","./TabBarController.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/SocketManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var s,n,o,t,r,i,a,c,l,u,g,h;return{setters:[function(e){s=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){r=e.cclegacy,i=e._decorator,a=e.EditBox,c=e.Button,l=e.Label,u=e.ProgressBar,g=e.Color,h=e.Component}],execute:function(){var d,b,p,f,y,w,I,m,L,k,B,M,v,P,U;r._RF.push({},"a0c39VZ6j5NRrT6cxMHqDGB","SocketManager",void 0);var S=i.ccclass,V=i.property;e("SocketManager",(d=S("SocketManager"),b=V(a),p=V(c),f=V(l),y=V(u),w=V(l),I=V(l),d((k=s((L=function(e){function s(){for(var s,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return s=e.call.apply(e,[this].concat(r))||this,o(s,"userIdInput",k,t(s)),o(s,"connectButton",B,t(s)),o(s,"coinsLabel",M,t(s)),o(s,"energyProgressBar",v,t(s)),o(s,"energyValueLabel",P,t(s)),o(s,"messagesLabel",U,t(s)),s.socket=null,s.userId=null,s.maxEnergy=2e3,s}n(s,e);var r=s.prototype;return r.start=function(){console.log("Инициализация SocketManager..."),console.log("userIdInput:",this.userIdInput),console.log("connectButton:",this.connectButton),console.log("coinsLabel:",this.coinsLabel),console.log("energyProgressBar:",this.energyProgressBar),console.log("energyValueLabel:",this.energyValueLabel),console.log("messagesLabel:",this.messagesLabel),this.userIdInput&&this.connectButton&&this.coinsLabel&&this.energyProgressBar&&this.energyValueLabel&&this.messagesLabel?(this.connectButton.node.on("click",this.onConnect,this),this.showUserInfo(!1)):console.error("Не все свойства SocketManager назначены в редакторе.")},r.onDestroy=function(){this.socket&&this.socket.disconnect()},r.onConnect=function(){var e=this,s=this.userIdInput.string.trim(),n=parseInt(s,10);if(isNaN(n)||n<=0)this.showMessage("Пожалуйста, введите корректный ID пользователя.","danger");else{this.userId=n;try{this.socket=io("https://dev.simatap.ru",{transports:["websocket"],secure:!0,rejectUnauthorized:!1}),this.socket.on("connect",(function(){console.log("Подключено к серверу Socket.IO"),e.showMessage("Подключено к серверу.","success"),e.socket.emit("register",{userId:e.userId}),console.log('Отправлено событие "register" с userId: '+e.userId)})),this.socket.on("disconnect",(function(){console.log("Отключено от сервера Socket.IO"),e.showMessage("Отключено от сервера.","danger"),e.showUserForm(!0),e.showUserInfo(!1)})),this.socket.on("energyUpdated",(function(s){e.updateEnergy(s.energy_left)})),this.socket.on("coinsUpdated",(function(s){var n=Math.round(s.coins);e.coinsLabel.string=""+n})),this.socket.on("tapError",(function(s){e.showMessage(s.message,"warning")})),this.socket.on("registrationError",(function(s){e.showMessage(s.message,"danger"),e.showUserForm(!0),e.showUserInfo(!1)})),this.socket.on("connect_error",(function(s){console.error("Ошибка подключения к Socket.IO:",s),e.showMessage("Ошибка подключения к серверу.","danger")}))}catch(e){console.error("Ошибка при инициализации Socket.IO:",e),this.showMessage("Ошибка подключения к серверу.","danger")}this.showUserForm(!1),this.showUserInfo(!0),this.showMessage("Вы успешно подключились.","success")}},r.onTap=function(){this.userId?this.socket&&this.socket.connected?(this.socket.emit("tap",{userId:this.userId}),console.log('Отправлено событие "tap"'),this.showMessage("Тап отправлен!","info")):(this.showMessage("Соединение с сервером отсутствует.","danger"),console.warn("Соединение с сервером отсутствует.")):this.showMessage("Пользователь не подключен.","danger")},r.showMessage=function(e,s){if(void 0===s&&(s="info"),this.messagesLabel)switch(this.messagesLabel.string=e,s){case"success":this.messagesLabel.node.color=new g(0,255,0);break;case"danger":this.messagesLabel.node.color=new g(255,0,0);break;case"warning":this.messagesLabel.node.color=new g(255,165,0);break;default:this.messagesLabel.node.color=new g(255,255,255)}else console.warn("messagesLabel не установлен.")},r.showUserForm=function(e){this.userIdInput&&this.connectButton?(this.userIdInput.node.active=e,this.connectButton.node.active=e):console.warn("userIdInput или connectButton не установлены.")},r.showUserInfo=function(e){this.coinsLabel&&this.energyProgressBar&&this.energyValueLabel?(this.coinsLabel.node.active=e,this.energyProgressBar.node.active=e,this.energyValueLabel.node.active=e):console.warn("coinsLabel, energyProgressBar или energyValueLabel не установлены.")},r.updateEnergy=function(e){var s=(e=Math.max(0,Math.min(this.maxEnergy,e)))/this.maxEnergy;this.energyProgressBar.progress=s,this.energyValueLabel.string=e+"/"+this.maxEnergy},s}(h)).prototype,"userIdInput",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=s(L.prototype,"connectButton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=s(L.prototype,"coinsLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=s(L.prototype,"energyProgressBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=s(L.prototype,"energyValueLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=s(L.prototype,"messagesLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=L))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/SpineController.ts.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SocketManager.ts"],(function(n){var e,t,i,o,r,s,a,l,c,p,u;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,s=n._decorator,a=n.sp,l=n.UITransform,c=n.Node,p=n.Component},function(n){u=n.SocketManager}],execute:function(){var h,f,g,d,m,C,S;r._RF.push({},"7af28zZEkNKYY1uSBPGocx/","SpineController.ts",void 0);var k=s.ccclass,y=s.property;n("SpineController",(h=k("SpineController"),f=y(a.Skeleton),g=y(u),h((C=e((m=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=n.call.apply(n,[this].concat(r))||this,i(e,"spine",C,o(e)),i(e,"socketManager",S,o(e)),e}t(e,n);var r=e.prototype;return r.onLoad=function(){var n=this.getComponent(l);n||(n=this.addComponent(l)),n.setContentSize(1897.88,2903.94),n.setAnchorPoint(.553265,.004952),this.node.on(c.EventType.TOUCH_END,this.onSpineClicked,this),this.spine?(this.spine.setAnimation(0,"Основная",!0),this.spine.setCompleteListener(this.onAnimationComplete.bind(this))):console.warn("Spine компонент не установлен в SpineController.")},r.onSpineClicked=function(n){console.log("Spine animation clicked"),this.spine&&(this.spine.setAnimation(1,"Нажатие",!1),this.spine.addAnimation(1,"Основная",!0,0)),this.socketManager?(console.log("Calling socketManager.onTap()"),this.socketManager.onTap()):console.warn("SocketManager не установлен в SpineController.")},r.onAnimationComplete=function(n){n&&1===n.trackIndex&&this.spine.setAnimation(1,"Основная",!0)},e}(p)).prototype,"spine",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(m.prototype,"socketManager",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/TabBarController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,a,r,s,l,u,c,b,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.Node,l=e.Label,u=e.UIOpacity,c=e.tween,b=e.Vec3,h=e.Color,p=e.Component}],execute:function(){var g,d,f,m,v,P,T,w,y,k,x,H,z,L,F,E,C,S,B,I,N,U,R,_,A,D,O,W,G,Y,M,j,K,V,Z,q,J,Q,X,$,ee,te,ne;a._RF.push({},"40497KNIRZM96W3FB/cr0rR","TabBarController",void 0);var ie=r.ccclass,oe=r.property;e("TabBarController",(g=ie("TabBarController"),d=oe(s),f=oe(s),m=oe(s),v=oe(s),P=oe(s),T=oe(s),w=oe(s),y=oe(s),k=oe(s),x=oe(s),H=oe(l),z=oe(l),L=oe(l),F=oe(l),E=oe(l),C=oe(s),S=oe(s),B=oe(s),I=oe(s),N=oe(s),g((_=t((R=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"mainPage",_,o(t)),i(t,"friendsPage",A,o(t)),i(t,"storePage",D,o(t)),i(t,"leadersPage",O,o(t)),i(t,"tasksPage",W,o(t)),i(t,"iconHome",G,o(t)),i(t,"iconFriends",Y,o(t)),i(t,"iconStore",M,o(t)),i(t,"iconLeaders",j,o(t)),i(t,"iconTasks",K,o(t)),i(t,"textHome",V,o(t)),i(t,"textFriends",Z,o(t)),i(t,"textStore",q,o(t)),i(t,"textLeaders",J,o(t)),i(t,"textTasks",Q,o(t)),i(t,"buttonHome",X,o(t)),i(t,"buttonFriends",$,o(t)),i(t,"buttonLeaders",ee,o(t)),i(t,"buttonTasks",te,o(t)),i(t,"activeButton",ne,o(t)),t.currentTab="home",t}n(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;this.checkProperties(),this.showPage(this.currentTab,!1),this.iconHome.on(s.EventType.TOUCH_END,(function(){e.showPage("home",!0)})),this.iconFriends.on(s.EventType.TOUCH_END,(function(){e.showPage("friends",!0)})),this.iconStore.on(s.EventType.TOUCH_END,(function(){e.showPage("store",!0)})),this.iconLeaders.on(s.EventType.TOUCH_END,(function(){e.showPage("leaders",!0)})),this.iconTasks.on(s.EventType.TOUCH_END,(function(){e.showPage("tasks",!0)}))},a.checkProperties=function(){[{name:"mainPage",value:this.mainPage},{name:"friendsPage",value:this.friendsPage},{name:"storePage",value:this.storePage},{name:"leadersPage",value:this.leadersPage},{name:"tasksPage",value:this.tasksPage},{name:"iconHome",value:this.iconHome},{name:"iconFriends",value:this.iconFriends},{name:"iconStore",value:this.iconStore},{name:"iconLeaders",value:this.iconLeaders},{name:"iconTasks",value:this.iconTasks},{name:"textHome",value:this.textHome},{name:"textFriends",value:this.textFriends},{name:"textStore",value:this.textStore},{name:"textLeaders",value:this.textLeaders},{name:"textTasks",value:this.textTasks},{name:"buttonHome",value:this.buttonHome},{name:"buttonFriends",value:this.buttonFriends},{name:"buttonLeaders",value:this.buttonLeaders},{name:"buttonTasks",value:this.buttonTasks},{name:"activeButton",value:this.activeButton}].forEach((function(e){e.value||console.warn('Property "'+e.name+'" is not assigned in the inspector.')}))},a.showPage=function(e,t){void 0===t&&(t=!0),e!==this.currentTab&&(this.hidePage(this.currentTab,t),this.showNewPage(e,t),this.updateTabUI(e),this.currentTab=e)},a.hidePage=function(e,t){var n=this.getPageNode(e);if(n){var i=n.getComponent(u);i||(console.warn('UIOpacity component not found on "'+e+'" page. Adding one.'),i=n.addComponent(u)),t?(c(n).to(.3,{scale:new b(.95,.95,1)}).start(),c(i).to(.3,{opacity:0}).call((function(){n.active=!1,n.setScale(1,1,1),i.opacity=255,console.log('Page "'+e+'" скрыта.')})).start()):(n.active=!1,i.opacity=255,console.log('Page "'+e+'" скрыта без анимации.'))}else console.error('Page node for "'+e+'" not found.')},a.showNewPage=function(e,t){var n=this.getPageNode(e);if(n){n.active=!0;var i=n.getComponent(u);i||(console.warn('UIOpacity component not found on "'+e+'" page. Adding one.'),i=n.addComponent(u)),t?(i.opacity=0,n.setScale(.95,.95,1),c(i).to(.3,{opacity:255}).start(),c(n).to(.3,{scale:new b(1.05,1.05,1)}).to(.3,{scale:new b(1,1,1)}).call((function(){console.log('Page "'+e+'" показана.')})).start()):(i.opacity=255,n.setScale(1,1,1),console.log('Page "'+e+'" показана без анимации.'))}else console.error('Page node for "'+e+'" not found.')},a.getPageNode=function(e){switch(e){case"home":return this.mainPage;case"friends":return this.friendsPage;case"store":return this.storePage;case"leaders":return this.leadersPage;case"tasks":return this.tasksPage;default:return console.warn("Unknown page: "+e),null}},a.updateTabUI=function(e){switch(this.textHome.color=h.GRAY,this.textFriends.color=h.GRAY,this.textStore.color=h.GRAY,this.textLeaders.color=h.GRAY,this.textTasks.color=h.GRAY,this.activeButton.active=!1,this.buttonHome.active=!1,this.buttonFriends.active=!1,this.buttonLeaders.active=!1,this.buttonTasks.active=!1,e){case"home":this.textHome.color=h.WHITE,this.buttonHome.active=!0;break;case"friends":this.textFriends.color=h.WHITE,this.buttonFriends.active=!0;break;case"store":this.textStore.color=h.WHITE,this.activeButton.active=!0;break;case"leaders":this.textLeaders.color=h.WHITE,this.buttonLeaders.active=!0;break;case"tasks":this.textTasks.color=h.WHITE,this.buttonTasks.active=!0}},t}(p)).prototype,"mainPage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(R.prototype,"friendsPage",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(R.prototype,"storePage",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(R.prototype,"leadersPage",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(R.prototype,"tasksPage",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(R.prototype,"iconHome",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(R.prototype,"iconFriends",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(R.prototype,"iconStore",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(R.prototype,"iconLeaders",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(R.prototype,"iconTasks",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(R.prototype,"textHome",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(R.prototype,"textFriends",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(R.prototype,"textStore",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(R.prototype,"textLeaders",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(R.prototype,"textTasks",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(R.prototype,"buttonHome",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(R.prototype,"buttonFriends",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(R.prototype,"buttonLeaders",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(R.prototype,"buttonTasks",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(R.prototype,"activeButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=R))||U));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});